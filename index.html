<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
<body>


  <div class="premierediv">
    <div class="line-container">
      <svg viewBox="0 0 490 2069" fill="none" preserveAspectRatio="xMidYMax meet">
        <path class="onepath" d="M208.999 -0.5V466.5C246.5 560.5 352.499 546.5 352.499 546.5C326.499 541.7 295.499 525.5 283.999 513.5C283.999 513.5 208.999 585.5 135.499 513.5C135.499 513.5 96.9994 546.5 67.4994 546.5C67.4994 546.5 -77.5 594 67.4994 622.5C67.4994 622.5 105 626.5 135.499 591C135.499 591 194.5 659 283.999 591C283.999 591 319.5 622.5 352.499 622.5C352.499 622.5 478 671 352.499 709C352.499 709 208.999 709 208.999 773V1296.5L393.5 1352.5L109.5 1499L485.5 1684.5L158.5 2067" stroke="#FF0000" stroke-width="5"/>
      </svg>
    </div>

    <section class="one">
      <h1>div 1</h1>
    </section>

    <section class="two">
      <h1>div 2</h1>
    </section>
  </div>

  <div class="deuxiemediv">

    <div class="line-container">
      <svg viewBox="0 0 493 1112" fill="none" preserveAspectRatio="xMidYMax meet">
        <path class="twopath" d="M209.181 0V250.497C246.725 300.919 352.846 293.409 352.846 293.409C326.816 290.834 295.781 282.145 284.268 275.708C284.268 275.708 209.181 314.328 135.597 275.708C135.597 275.708 97.0523 293.409 67.5183 293.409C67.5183 293.409 -77.6479 318.888 67.5183 334.175C67.5183 334.175 105.062 336.321 135.597 317.279C135.597 317.279 194.665 353.754 284.268 317.279C284.268 317.279 319.809 334.175 352.846 334.175C352.846 334.175 478.491 360.19 352.846 380.573C352.846 380.573 209.181 380.573 209.181 414.903V695.706L393.894 725.745L109.567 804.327L486 903.828L158.624 1109" stroke="#FF0000" stroke-width="5"/>
      </svg>
    </div>





    <section class="three">
      <h1>div 3</h1>
    </section>

    <section class="four">
      <h1>div 4</h1>
    </section>
  </div>


  <script>

    let onepath = document.querySelector('.onepath')
    let onepathLength = onepath.getTotalLength()

    onepath.style.strokeDasharray = onepathLength + ' ' + onepathLength;

    onepath.style.strokeDashoffset = onepathLength;

    window.addEventListener('scroll', () => {

      // what % down is it ?
      // var scrollPercentage = (document.documentElement.scrollTop + document.body.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);
      // var scrollPercentage = (document.documentElement.scrollTop + document.querySelector('.premierediv').scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);


      // Hauteur totale de la première div
      let premiereDivHeight = document.querySelector('.premierediv').offsetHeight;
      // Hauteur totale du document
      let documentHeight = document.documentElement.scrollHeight - premiereDivHeight;
      // Position de défilement actuelle
      let scrollPosition = window.scrollY;
      // Pourcentage de défilement
      let scrollPercentage = scrollPosition / documentHeight;

      // Longueur de dessin pour compenser le pourcentage de défilement
      let drawLength = onepathLength * scrollPercentage * 2;

      // Dessiner en sens inverse
      onepath.style.strokeDashoffset = onepathLength - drawLength;

    })



  </script>

  <script>

    let twopath = document.querySelector('.twopath')
    let twopathLength = twopath.getTotalLength()

    twopath.style.strokeDasharray = twopathLength + ' ' + twopathLength;

    twopath.style.strokeDashoffset = twopathLength;

    window.addEventListener('scroll', () => {

      // what % down is it ?
      // var scrollPercentage = (document.documentElement.scrollTop + document.body.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);
      // var scrollPercentage = (document.documentElement.scrollTop + document.querySelector('.premierediv').scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);


      // Hauteur totale de la deuxieme div
      let deuxiemeDivHeight = document.querySelector('.deuxiemediv').offsetHeight;
      // Hauteur totale du document
      let documentHeight = document.documentElement.scrollHeight - deuxiemeDivHeight;
      // Position de défilement actuelle
      let scrollPosition = window.scrollY;
      // Pourcentage de défilement
      let scrollPercentage = scrollPosition / documentHeight;

      // Longueur de dessin pour compenser le pourcentage de défilement
      let drawLength = twopathLength * scrollPercentage * 2;

      // Dessiner en sens inverse
      twopath.style.strokeDashoffset = twopathLength - drawLength;

    })

  </script>

</body>
</html>
